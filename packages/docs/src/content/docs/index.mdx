---
title: vanixiets
description: Multi-machine nix infrastructure using aspect-based deferred module composition and clan
template: splash
hero:
  tagline: "Multi-machine nix infrastructure for nixos, nix-darwin, and home-manager using aspect-based deferred module composition and clan fleet coordination."
  image:
    file: ../../assets/nix-snowflake-colours.svg
  actions:
    - text: Getting started
      link: /guides/getting-started/
      icon: right-arrow
      variant: primary
    - text: View on GitHub
      link: https://github.com/cameronraysmith/vanixiets
      icon: external
      variant: minimal
---

import { Card, CardGrid } from "@astrojs/starlight/components";

## Features

<CardGrid stagger>
  <Card title="Aspect-based module organization" icon="puzzle">
    Every nix file is a deferred flake-parts module organized by feature category rather than by host.
    Cross-cutting configuration via unified modules spans nixos, nix-darwin, and home-manager.
  </Card>
  <Card title="Clan deployment" icon="rocket">
    Multi-machine coordination with unified deployment across N machines (4 darwin, 4 nixos).
    Service orchestration via clan inventory system with role-based assignments.
  </Card>
  <Card title="Per-package nixpkgs channel selection" icon="shield">
    Multi-channel overlay architecture enables unstable default with selective stable fallbacks.
    Apply surgical fixes for broken packages without requiring full flake lockfile rollback.
  </Card>
  <Card title="Cross-platform deployment targets" icon="laptop">
    Deploy to nixos, nix-darwin, or home-manager configurations.
    Consistent architecture across linux and macos systems with platform-specific modules.
  </Card>
  <Card title="Two-tier secrets management" icon="lock">
    Clan vars manage system-level generated secrets (SSH keys, zerotier identities).
    sops-nix can be used directly for user-level manual secrets (API tokens, personal credentials).
  </Card>
  <Card title="Composable package overlays" icon="puzzle">
    Multi-layer overlay composition: simultaneously use multiple upstream nixpkgs channels, apply stable fallbacks, and define custom packages and overrides.
    Integrates a flake-parts-compatible pkgs-by-name pattern for custom package definitions.
  </Card>
  <Card title="Infrastructure as code" icon="cloud">
    Terranix modules support deployment to multiple cloud providers including Hetzner, GCP, AWS, Azure infrastructure provisioning.
    Togglable compute nodes for cost-controlled cloud resource usage.
  </Card>
</CardGrid>

## Quick start

```bash
# Clone repository
git clone https://github.com/cameronraysmith/vanixiets.git
cd vanixiets

# Bootstrap nix and essential tools
make bootstrap && exec $SHELL

# Activate direnv
direnv allow

# Activate configuration
just activate
```

See [Getting started guide](/guides/getting-started/) for complete setup instructions.

## Architecture

Multi-layer architecture combining complementary patterns:

1. **flake-parts** - Modular flake composition framework enabling deferred module integration
2. **Aspect-based organization** - Feature-oriented module structure with import-tree auto-discovery
3. **clan** - Multi-machine coordination and deployment
4. **Multi-channel nixpkgs** - Per-package nixpkgs channel selection for resilience

Learn more in [Architecture overview](/concepts/architecture-overview/).

## Documentation structure

- **Guides** - Task-oriented how-tos for common operations
- **Concepts** - Understanding-oriented explanations of architecture and patterns
- **Reference** - Information-oriented lookup material
- **Development** - AMDiRE-based development documentation

## Next steps

<CardGrid>
  <Card title="Understand the architecture" icon="open-book">
    Deferred module composition + clan architecture for multi-machine deployments.
    [Architecture overview →](/concepts/architecture-overview/)
  </Card>
  <Card title="See aspect-based module composition" icon="puzzle">
    Feature-based deferred module organization using flake-parts.
    [Deferred module composition →](/concepts/deferred-module-composition/)
  </Card>
  <Card title="Understand clan integration" icon="rocket">
    Multi-machine coordination, deployment, and service orchestration.
    [Clan Integration →](/concepts/clan-integration/)
  </Card>
  <Card title="Add a new host" icon="laptop">
    Onboard a new NixOS or nix-darwin system.
    [Host onboarding guide →](/guides/host-onboarding/)
  </Card>
</CardGrid>
