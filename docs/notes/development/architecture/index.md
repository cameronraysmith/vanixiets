# Architecture

## Table of Contents

- [Architecture](#table-of-contents)
  - [Executive Summary](./executive-summary.md)
  - [Project Initialization](./project-initialization.md)
  - [Decision Summary](./decision-summary.md)
  - [Architectural Decisions](./architectural-decisions.md)
    - [User Management Decision: Traditional vs Clan Users Service](./architectural-decisions.md#user-management-decision-traditional-vs-clan-users-service)
    - [Home-Manager Pattern Decision: User-Based vs Profile-Based Modules](./architectural-decisions.md#home-manager-pattern-decision-user-based-vs-profile-based-modules)
  - [Project Structure](./project-structure.md)
  - [Epic to Architecture Mapping](./epic-to-architecture-mapping.md)
  - [Technology Stack Details](./technology-stack-details.md)
    - [Core Technologies](./technology-stack-details.md#core-technologies)
    - [Integration Points](./technology-stack-details.md#integration-points)
  - [Novel Pattern Designs](./novel-pattern-designs.md)
  - [Implementation Patterns](./implementation-patterns.md)
    - [Naming Conventions](./implementation-patterns.md#naming-conventions)
    - [Code Organization](./implementation-patterns.md#code-organization)
    - [Error Handling](./implementation-patterns.md#error-handling)
    - [Logging Strategy](./implementation-patterns.md#logging-strategy)
  - [Data Architecture](./data-architecture.md)
    - [Clan Vars Storage Structure](./data-architecture.md#clan-vars-storage-structure)
    - [Inventory Data Model](./data-architecture.md#inventory-data-model)
    - [Hardware Configuration Data](./data-architecture.md#hardware-configuration-data)
  - [API Contracts](./api-contracts.md)
    - [Dendritic Module Interface](./api-contracts.md#dendritic-module-interface)
    - [Clan Vars Generator Interface](./api-contracts.md#clan-vars-generator-interface)
    - [Clan Service Instance Interface](./api-contracts.md#clan-service-instance-interface)
  - [Security Architecture](./security-architecture.md)
    - [Secrets Encryption](./security-architecture.md#secrets-encryption)
    - [SSH Access Control](./security-architecture.md#ssh-access-control)
    - [Firewall Configuration](./security-architecture.md#firewall-configuration)
    - [VPS Hardening](./security-architecture.md#vps-hardening)
    - [Zerotier Network Security](./security-architecture.md#zerotier-network-security)
  - [Performance Considerations](./performance-considerations.md)
    - [Build Performance](./performance-considerations.md#build-performance)
    - [Deployment Performance](./performance-considerations.md#deployment-performance)
    - [Network Performance](./performance-considerations.md#network-performance)
    - [Scalability Limits](./performance-considerations.md#scalability-limits)
  - [Deployment Architecture](./deployment-architecture.md)
    - [Development Workflow](./deployment-architecture.md#development-workflow)
    - [Terraform Deployment](./deployment-architecture.md#terraform-deployment)
    - [NixOS VPS Deployment](./deployment-architecture.md#nixos-vps-deployment)
    - [Darwin Deployment](./deployment-architecture.md#darwin-deployment)
    - [Rollback Procedures](./deployment-architecture.md#rollback-procedures)
    - [CI/CD Integration](./deployment-architecture.md#cicd-integration)
  - [Development Environment](./development-environment.md)
    - [Prerequisites](./development-environment.md#prerequisites)
    - [Setup Commands](./development-environment.md#setup-commands)
    - [Editor Integration](./development-environment.md#editor-integration)
  - [Darwin Networking Options](./darwin-networking-options.md)
    - [Option 1: Homebrew Zerotier (Maintains Consistency)](./darwin-networking-options.md#option-1-homebrew-zerotier-maintains-consistency)
    - [Option 2: Custom Launchd Service (Full Nix Control)](./darwin-networking-options.md#option-2-custom-launchd-service-full-nix-control)
    - [Option 3: Hybrid Clan Vars + Manual Zerotier (Pragmatic)](./darwin-networking-options.md#option-3-hybrid-clan-vars-manual-zerotier-pragmatic)
    - [Recommendation for Story 1.8](./darwin-networking-options.md#recommendation-for-story-18)
  - [Architecture Decision Records (ADRs)](./architecture-decision-records-adrs.md)
    - [ADR-001: Adopt Dendritic Flake-Parts + Clan-Core Integration](./architecture-decision-records-adrs.md#adr-001-adopt-dendritic-flake-parts-clan-core-integration)
    - [ADR-002: Use ZFS Unencrypted (Defer LUKS)](./architecture-decision-records-adrs.md#adr-002-use-zfs-unencrypted-defer-luks)
    - [ADR-003: Progressive Migration with Stability Gates](./architecture-decision-records-adrs.md#adr-003-progressive-migration-with-stability-gates)
    - [ADR-004: Darwin Networking via Multiple Options (Deferred to Story 1.8)](./architecture-decision-records-adrs.md#adr-004-darwin-networking-via-multiple-options-deferred-to-story-18)
    - [ADR-005: Multi-User via Standard NixOS Patterns (No Clan Magic)](./architecture-decision-records-adrs.md#adr-005-multi-user-via-standard-nixos-patterns-no-clan-magic)
    - [ADR-006: Remove nixos-unified (Post-Migration Only)](./architecture-decision-records-adrs.md#adr-006-remove-nixos-unified-post-migration-only)
