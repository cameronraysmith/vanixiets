# generated: 2025-11-07
# project: infra
# project_key: infra
# tracking_system: file-system
# story_location: {project-root}/docs/notes/development/work-items

# STATUS DEFINITIONS:
# ==================
# Epic Status:
#   - backlog: Epic exists in epic file but not contexted
#   - contexted: Epic tech context created (required before drafting stories)
#
# Story Status:
#   - backlog: Story only exists in epic file
#   - drafted: Story file created in stories folder
#   - ready-for-dev: Draft approved and story context created
#   - in-progress: Developer actively working on implementation
#   - review: Under SM review (via code-review workflow)
#   - done: Story completed
#
# Retrospective Status:
#   - optional: Can be completed but not required
#   - completed: Retrospective has been done
#
# WORKFLOW NOTES:
# ===============
# - Epics should be 'contexted' before stories can be 'drafted'
# - Stories can be worked in parallel if team capacity allows
# - SM typically drafts next story after previous one is 'done' to incorporate learnings
# - Dev moves story to 'review', SM reviews, then Dev moves to 'done'
#
# MIGRATION-SPECIFIC NOTES:
# =========================
# - This is a progressive rollout infrastructure migration with 6 phases (Phase 0-5)
# - Phase 0 includes INFRASTRUCTURE DEPLOYMENT (Hetzner + GCP VMs) in test-clan
# - Each phase includes: implementation + stability validation (1-2 weeks)
# - Stories within phases are largely sequential, not parallelizable
# - Each phase must reach stability gate before next phase begins
# - Phase 0 has a GO/NO-GO decision gate that determines entire migration approach
# - Primary workstation (stibnite) requires 4-6 weeks cumulative stability before migration
#
# STABILITY GATES:
# ================
# - Epic 1 (Story 1.14): GO/CONDITIONAL GO/NO-GO decision determines entire approach
# - Epic 1 (Story 1.12): Infrastructure stable 1 week minimum before Phase 1
# - Epic 2 (Story 2.6): cinnabar stable 1-2 weeks → proceed to blackphos
# - Epic 3 (Story 3.5): blackphos stable 1-2 weeks → proceed to rosegold
# - Epic 4 (Story 4.3): rosegold stable 1-2 weeks → proceed to argentum
# - Epic 5 (Story 5.2): argentum stable 1-2 weeks, cumulative 4-6+ weeks → proceed to stibnite
# - Epic 6 (Story 6.3): stibnite stable 1-2 weeks → proceed to cleanup
#
# ZERO-REGRESSION REQUIREMENT:
# ============================
# All functionality must be preserved during migration. Validate at every phase.

generated: 2025-11-07
project: infra
project_key: infra
tracking_system: file-system
story_location: "{project-root}/docs/notes/development/work-items"

development_status:
  # Epic 1: Architectural Validation + Infrastructure Deployment (Phase 0 - test-clan)
  # Strategic decision (2025-11-05): Story 1.2 complete (Outcome A) - implement test harness + dendritic refactoring NOW
  # Rationale: Test strategy enables risk-free refactoring, validates architecture during Phase 0, benefits Epic 2+
  # Flow: 1.1-1.5 (complete) → 1.6 (test harness) → 1.7 (dendritic refactor) → 1.8-1.14 (GCP + validation)
  # COMPLETE (2025-11-20): EPIC 1 PHASE 0 VALIDATION 100% SUCCESS
  # 13/13 stories COMPLETE, ALL 7 decision criteria PASS, 0 CRITICAL/MAJOR blockers, GO decision rendered
  # Epic 1 investment: 60-80h actual effort → Epic 2-6 authorized (200+ hours progressive production migration)
  epic-1: done
  1-1-prepare-existing-test-clan-repository-for-validation: done
  # Story 1.2: DONE - Outcome A (Already Compliant) - No refactoring needed, architecture validated
  1-2-implement-dendritic-flake-parts-pattern-in-test-clan: done
  # Story 1.3: COMPLETE - Inventory configured, ready for Story 1.4
  1-3-configure-clan-inventory-and-service-instances-for-test-vm: done
  # Story 1.4: APPROVED - Review corrected, cx43 at $9.99/month per user direction, all ACs satisfied
  1-4-create-hetzner-terraform-config-and-host-modules: done
  # Story 1.5: DONE - APPROVED ✅ - All 13 ACs validated, ZFS encryption bug discovered and documented
  1-5-deploy-hetzner-vm-and-validate-stack: done
  # Story 1.6: DONE - Test harness implemented with 18 tests (12 nix-unit + 4 validation + 2 integration)
  # Implementation evolved to hybrid approach in modules/checks/ with auto-discovery (superior to original plan)
  1-6-implement-comprehensive-test-harness-for-test-clan: done
  # Story 1.7: DONE - Pure dendritic flake-parts pattern achieved with zero regressions
  # All feature tests passing (TC-008, TC-009), Step 2.5 deferred (manual machine registration retained)
  1-7-execute-dendritic-refactoring-in-test-clan-using-test-harness: done
  # Story 1.8: DONE - Configuration build complete, APPROVED ✅
  # Successfully migrated blackphos to test-clan dendritic + clan pattern
  # AC1-AC4 complete: module structure, home-manager, clan inventory validated
  # AC5-AC7 deferred: physical deployment awaits access to blackphos hardware
  # Architectural gap identified: crs58/raquel configs inline (not reusable across platforms)
  # Course correction executed (2025-11-12): Story 1.8A inserted to restore modular pattern
  # Review outcome: APPROVE - All configuration objectives achieved, proper course correction
  1-8-migrate-blackphos-from-infra-to-test-clan: done
  # Story 1.8A: DONE ✅ - Extract Portable Home-Manager Modules (CRITICAL PATH)
  # Extracted crs58/raquel into portable modules (modules/home/users/{crs58,raquel}/)
  # Exported to dendritic namespace: flake.modules.homeManager."users/{username}"
  # Exposed standalone homeConfigurations.{crs58,raquel} for nh home switch workflow
  # Refactored blackphos to import from namespace (46 lines removed, zero regression validated)
  # Package diff: 270 packages preserved exactly, all functionality intact
  # Added test coverage: TC-018 (home-module-exports), TC-019 (home-configurations-exposed)
  # Pattern documented in architecture.md with validation evidence
  # Successfully unblocked Story 1.9: crs58 module ready for cinnabar NixOS reuse
  # Implementation time: ~2 hours, all 8 acceptance criteria satisfied
  1-8a-extract-portable-home-manager-modules: done
  # Story 1.9: DONE ✅ APPROVED ✅ - Rename test VMs to production names (cinnabar/electrum)
  # All 7 ACs validated: VMs renamed, clan inventory updated, zerotier network operational
  # Bidirectional connectivity confirmed (1-12ms latency), 14/14 tests passing
  # Zerotier network: db4344343b14b903 (cinnabar controller + electrum peer)
  # Key learning: clan machines update uploads vars but doesn't restart services
  # Context generated 2025-11-13 with 17 doc refs (7 internal + 10 external examples)
  # Review (2025-11-13): APPROVED - 3 advisory notes (documentation improvements), zero blockers
  1-9-rename-vms-cinnabar-electrum-establish-zerotier: done
  # Story 1.10: DONE ✅ (2025-11-14) - Complete Migrations and Establish Clean Foundation
  # Split from original 1.10 to optimize sizing (10-15h vs 18-27h original)
  # Completes blackphos migration, deploys cameron user to cinnabar, refines dendritic patterns
  # Critical: cinnabar user config BLOCKS Story 1.12 (heterogeneous networking validation)
  # Foundation for Story 1.11 (type-safe home-manager architecture)
  # REVIEW #1 (2025-11-13): CHANGES REQUESTED - Technical excellent, documentation gaps (AC15-AC16)
  # IMPLEMENTATION: Created migration-patterns.md (424 lines), dendritic-patterns.md (651 lines), completed story notes
  # REVIEW #2 (2025-11-13): APPROVED ✅ - All CRITICAL gaps resolved, documentation exceeds requirements
  # 16/16 ACs satisfied, 7/7 tasks complete, production-ready documentation, zero regressions
  # User approved story-done (2025-11-14) - VPS deployment deferred to separate infrastructure task
  1-10-complete-migrations-establish-clean-foundation: done
  # Story 1.10A: DONE ✅ APPROVED ✅ (2025-11-14) - Migrate User Management to Clan Inventory Pattern
  # DISCOVERED STORY - Architectural validation enhancement from party-mode review
  # Implementation: 3.5 hours across 11 atomic commits (846b61e-fa90429)
  # Pattern migration: Direct NixOS → clan inventory users service + vars-based password management
  # Two-instance pattern: user-cameron (modern machines), user-crs58 (legacy machines)
  # Functional validation COMPLETE: VPS deployment successful (cinnabar IP: 49.13.68.78)
  # Validated end-to-end: SSH login, shell (zsh), sudo, git config, home-manager packages
  # Post-review improvements: Critical SSH keys fix (6364610), home directory auto-detection (e629e8e)
  # Test suite: 10 checks passing (TC-024 vars validation added), zero regressions
  # Documentation: user-management.md (327 lines) + adding-users.md (436 lines)
  # REVIEW (2025-11-14): APPROVE - All 11 ACs implemented, 6/6 tasks verified, production-ready
  # Strategic value validated: Pattern ready for Epic 2-6 scaling (6 machines × 4+ users)
  # Estimated time savings: 6-12 hours in Epic 2-6 (inventory pattern vs direct config)
  1-10a-migrate-user-management-inventory: done
  # Story 1.10B: DONE ✅ (2025-11-14) - Migrate Home-Manager Module Ecosystem from infra to test-clan
  # DISCOVERED STORY - Configuration completeness gap via comprehensive blackphos audit
  # Implementation: 18 commits across 2 sessions (71dde62-d4ef3a2)
  # Priority 1-3 modules migrated (17 total): dev env (7) + AI tooling (4) + shell/terminal (6)
  # Pattern B implemented (underscore directories + plain HM modules)
  # CRITICAL ARCHITECTURAL LIMITATIONS DISCOVERED (dev notes lines 767-1031):
  #   - 11 features DISABLED (SSH signing, MCP API keys, GLM wrapper, tmux theme, custom packages)
  #   - darwinConfigurations.blackphos.system FAILS TO BUILD (lazyvim integration broken)
  #   - No flake context access (plain modules cannot access flake.inputs, flake.config)
  #   - sops-nix completely incompatible (requires flake.config lookups)
  # Functional status: 85% (core functionality present, secrets/themes/packages disabled)
  # homeConfigurations.crs58/raquel build successfully, darwinConfigurations FAILS
  # Party Mode investigation (9 agents): UNANIMOUS refactor to Pattern A (both references use Pattern A)
  # Story 1.10BA inserted to refactor Pattern B → Pattern A before Story 1.10C
  # Strategic value: Provided empirical evidence that Pattern B is architectural dead end
  1-10b-migrate-home-manager-modules: done
  # Story 1.10BA: DONE (2025-11-14) - Refactor Home-Manager Modules from Pattern B to Pattern A
  # ✅ SCOPE ADJUSTED: Feature restoration (original AC17-AC20) moved to Story 1.10D
  # Structural Pattern A migration COMPLETE: All 16 modules use explicit flake.modules = { ... } pattern
  # Aggregate organization validated: development (7), ai (4), shell (6) following drupol reference
  # All 3 critical builds passing: crs58, raquel, blackphos (darwinConfigurations build FIXED)
  # Pattern A benefits validated: flake context access, aggregate namespaces, industry-standard
  # Actual effort: ~4 hours (vs 8-10h estimated - structural work only, features deferred to 1.10D)
  # Party Mode architectural review validated empirically
  # Feature restoration deferred rationale: test-clan uses clan vars (not sops-nix), requires Story 1.10C infrastructure first
  # Dependencies: Story 1.10B (done), Blocks: Story 1.10C (modules have flake context), Story 1.10D (deferred features)
  # Strategic value achieved: Validates Pattern A at scale, unblocks Story 1.10C, provides Epic 2-6 pattern
  1-10ba-refactor-pattern-a: done
  # Story 1.10C: DONE ✅ APPROVED ✅ (2025-11-16) - Establish sops-nix Secrets for Home-Manager
  # Secrets management gap identified - Story 1.8 deferred, Story 1.10 never addressed (0% secrets coverage)
  # ARCHITECTURAL PIVOT (2025-11-15): Clan vars INCOMPATIBLE with home-manager (NixOS-specific _class parameter)
  # Two-tier secrets architecture validated: System-level (clan vars, future) vs User-level (sops-nix, now)
  # sops-nix proven pattern for home-manager across infra + 8 clan reference repos
  # Age key reuse pattern: Same keypair for clan secrets AND sops-nix (~/.config/sops/age/keys.txt)
  # Implementation: 52 commits, sops.templates patterns, multi-user encryption, Pattern A integration
  # Module access pattern updates: git.nix, jujutsu.nix, mcp-servers.nix, wrappers.nix, atuin.nix, rbw.nix
  # REVIEW #1 (2025-11-16): CHANGES REQUESTED - AC4-AC21 complete, AC22-AC24 documentation missing
  # REVIEW FOLLOW-UP (2025-11-16): All requested changes complete
  # Build validation (AC16-AC18): All 3 builds PASSED (darwin, crs58, raquel)
  # Documentation (AC23): age-key-management.md created (882 lines, Epic 2-6 operational guide)
  # Documentation (AC22+AC24): Section 12 added to architecture doc (375 lines, two-tier secrets)
  # Secret count clarified: ssh-public-key INTENTIONAL (8 crs58, 5 raquel for allowed_signers template)
  # REVIEW #2 (2025-11-16): APPROVE ✅ - All 24 ACs satisfied, 7/7 tasks verified, builds passing, docs complete
  # Epic 2-6 readiness: 100% (code validated, builds passing, documentation complete, operational guide ready)
  # Actual effort: 7.25 hours total (4.75h implementation + 2.5h review follow-up) vs 4.75h estimated
  # Strategic value: Validates sops-nix + Pattern A, unblocks Epic 2-6 migration, documents two-tier architecture
  1-10c-establish-sops-nix-secrets-home-manager: done
  # Story 1.10D: DONE ✅ APPROVED ✅ (2025-11-16) - Validate Custom Package Overlays with pkgs-by-name Pattern
  # Epic reordering decision (2025-11-16): Infrastructure validation BEFORE feature enablement
  # Validates infra's custom package overlay pattern works with dendritic flake-parts + clan architecture
  # pkgs-by-name-for-flake-parts pattern from Dendritic Overlay Pattern Review (drupol PRIMARY reference)
  # Test case: ccstatusline (production-ready derivation from infra, settings pre-configured in test-clan)
  # Implementation: 8 commits in test-clan (8086e59-f21527e), 2 commits in infra (2893c872, 5bbdedeb)
  # Drupol flat pattern validated (pkgs/by-name/ccstatusline/ NOT cc/ccstatusline/)
  # All 9 ACs satisfied with concrete evidence, all 5 tasks verified complete
  # 4 quality gates PASS: Infrastructure, Build, Integration, Documentation
  # Section 13.1 comprehensive tutorial (467 lines): pattern + ccstatusline example + infra migration guide
  # infra migration path documented: 4 packages (ccstatusline ✅, atuin-format, markdown-tree-parser, starship-jj)
  # Effort: 2.5-3h total, Risk: LOW (directory restructuring only, SAME lib.packagesFromDirectoryRecursive)
  # REVIEW (2025-11-16): APPROVE ✅ - Zero HIGH/MEDIUM/LOW findings, production-ready, security posture strong
  # Strategic value: Completes Epic 1 Layer 3 validation, removes Epic 2-6 blocker (overlay uncertainty)
  # Three-layer pattern validated: pkgs/by-name/ (definition) → modules/nixpkgs.nix (export) → dendritic modules (consumption)
  # Dendritic compatibility: All 6 checklist items satisfied (package definition, export, consumption, no specialArgs, import-tree, drupol match)
  # Implementation time: ~2h 55min (within 2-3h estimate), Review quality: 10/10 (clarity, completeness, technical, documentation)
  1-10d-validate-custom-package-overlays: done
  # Story 1.10DA: IN PROGRESS (2025-11-16) - Validate Overlay Architecture Preservation with pkgs-by-name Integration
  # DISCOVERED STORY - Party Mode team identified architectural gap (Option C staged validation)
  # Story 1.10D validates Layer 3 only (custom packages via pkgs-by-name), missing Layers 1,2,4,5 (overlays)
  # Implementation COMPLETE (2025-11-16): Section 13.2 created (375 lines), all 6 ACs documented
  # REVIEW #1 (2025-11-16): CHANGES REQUESTED - 1 MEDIUM finding (AC-A testing gap), 1 LOW finding (task tracking)
  # Five-layer overlay architecture documented:
  #   Layer 1: Multi-channel nixpkgs access (stable, patched, unstable) - inputs overlay ✅
  #   Layer 2: Platform-specific hotfixes (stable fallbacks) - hotfixes overlay ✅
  #   Layer 3: Custom packages (ccstatusline, atuin-format, markdown-tree-parser, starship-jj) - pkgs-by-name ✅ (Story 1.10D)
  #   Layer 4: Per-package overrides (build modifications) - overrides overlay ✅
  #   Layer 5: Flake input overlays (external integration) - flakeInputs overlay ✅
  # Documentation quality: Excellent (375 lines, production-quality, architectural alignment confirmed)
  # Action items: Execute AC-A evaluation commands (MEDIUM), update task checkboxes (LOW)
  # Strategic value: 95% Epic 1 coverage achieved (all 5 layers validated), Epic 2-6 migration guide complete
  # Next: Address review findings, then story-done
  # Dependencies: Story 1.10D (Layer 3 foundation) ✅ COMPLETE
  # Blocks: Epic 1 GO/NO-GO decision (Story 1.12) - architectural coverage validation in progress
  1-10da-validate-overlay-preservation: done
  # Story 1.10DB: DONE ✅ APPROVED ✅ (2025-11-16) - Execute Overlay Architecture Migration from infra to test-clan
  # DISCOVERED STORY - Party Mode ultrathink (9 agents unanimous) identified Story 1.10DA empirical validation gap
  # Implementation: 5-layer overlay migration to dendritic structure (modules/nixpkgs/_overlays/)
  # Architectural evolution: Phase 1 (root-level) → Phase 2 (dendritic) → Phase 3 (dendritic subdirectory with underscore)
  # All 5 layers migrated and validated with empirical evidence:
  #   Layer 1 (inputs): Multi-channel access (stable 14.1.1 vs unstable 15.1.0) ✅
  #   Layer 2 (hotfixes): Platform hotfixes (micromamba 1.5.8 from stable) ✅
  #   Layer 3 (pkgs-by-name): Custom packages (ccstatusline, zero regression) ✅ [Story 1.10D]
  #   Layer 4 (overrides): Package build modifications infrastructure ✅
  #   Layer 5 (flakeInputs): Flake input overlays (nuenv, lazyvim) ✅
  # Hybrid pattern validated: overlays array + pkgsDirectory coexist in same perSystem (drupol proof)
  # REVIEW #1 (2025-11-16): BLOCKED - AC-F missing (Section 13.2 documentation 0 lines)
  # Resolution actions: Created Section 13.2 (lines 1937-2536, 600 lines), fixed file paths (commit aa35dbf7)
  # REVIEW #2 (2025-11-16): APPROVE ✅ - All 6 ACs satisfied, blocker resolved, production-ready
  # Documentation: Section 13.2 comprehensive (600 lines vs Section 13.1's 467), empirical evidence, migration guide
  # Zero regressions: All Story 1.10D checks pass, builds succeed (blackphos, cinnabar)
  # Actual effort: ~2.5h implementation + ~1h documentation = ~3.5h total (within 2-3h base + 1h doc estimates)
  # Strategic value: Achieves 95% Epic 1 coverage with EMPIRICAL validation, Epic 2-6 migration guide complete
  # Epic 1 principle satisfied: "Architectural Validation via Pattern Rehearsal" - DONE IT FOR REAL ✅
  # Dependencies: Story 1.10D (done), Story 1.10DA (done)
  # Unblocks: Story 1.12 (GO/NO-GO decision - 95% Epic 1 coverage achieved)
  1-10db-execute-overlay-architecture-migration: done
  # Story 1.10E: DONE ✅ APPROVED ✅ (2025-11-16) - Enable Remaining Features Using sops-nix Secrets and Flake Inputs
  # Previously Story 1.10D (2025-11-14), renamed during epic reordering to resolve dependency on ccstatusline package
  # Story 1.10C already enabled 9/11 features (sops-nix patterns: direct path, sops.placeholder, runtime cat, activation scripts)
  # Remaining scope: Add flake.inputs (nix-ai-tools, catppuccin-nix), enable claude-code package, catppuccin theme, ccstatusline feature
  # Implementation: 7 commits total (5 test-clan, 2 infra documentation), ~2 hours (within 1.5-2h estimate)
  # Features enabled: claude-code package (nix-ai-tools), catppuccin tmux theme (correct option structure), ccstatusline integration
  # All 8 ACs satisfied: Documentation (A-C), Features (D-F), Builds (G), Section 13.3 (H)
  # Build validation: All 4 configurations passing (crs58: 122 derivations, raquel: 105, blackphos: 177, cinnabar: 460)
  # CRITICAL FIX: configurations.nix overlay (commit 052a2d1) - use config.flake.overlays.default for all layers
  # Section 13.3: Complete feature enablement guide (154 lines, 7 patterns, empirical examples, Epic 2-6 migration guide)
  # REVIEW (2025-11-16): APPROVE ✅ - Zero blocking issues, code quality 9.5/10, documentation 9/10
  # Pattern validation: All 7 patterns coexist (sops-nix 1-4, flake.inputs 5-6, pkgs-by-name 7)
  # Epic 1 coverage: ~98% (architecture 95%, features 100%, patterns 100%)
  # Strategic value: Completes Pattern A + sops-nix + flake.inputs validation trilogy, Epic 2-6 ready
  # Dependencies: Story 1.10C (sops-nix ✅), Story 1.10D (ccstatusline package ✅), Story 1.10DB (overlays ✅)
  # Context XML: 1,078 lines, 7 patterns, 11 features, empirical validation evidence
  1-10e-enable-remaining-features: done
  # Story 1.11: Type-Safe Home-Manager Architecture [CONDITIONAL]
  # DEFERRED (2025-11-16): Party Mode decision - empirical validation strategy
  # Current architecture (Stories 1.8A + 1.10BA + 1.10C) proven at scale (270 pkgs, 16 modules, 4+ users)
  # Party Mode consensus: Deploy blackphos FIRST (Story 1.12), assess type-safety necessity based on REAL evidence
  # Re-evaluation checkpoint: Story 1.13 documentation phase (Party Mode assessment framework, epic lines 1858-1937)
  # Decision criteria (epic lines 1894-1914):
  #   GO: Deployment reveals typos/errors, machine-specific configs needed, homeHosts improves dendritic patterns
  #   MODIFY: Some elements valuable (CI checks) but not full homeHosts pattern
  #   SKIP: No issues encountered, current architecture elegant and maintainable, homeHosts adds unnecessary complexity
  # IF Story 1.12 smooth → permanent skip (current architecture sufficient for Epic 2-6)
  # IF Story 1.12 reveals issues → execute Story 1.11 before Story 1.14 GO/NO-GO
  # Estimated effort: 10-16 hours (if executed after Story 1.13 assessment determines GO/MODIFY)
  # Reference: docs/notes/development/home-manager-type-safe-architecture.md
  # Strategic value: Production-ready type-safe pattern IF empirical evidence proves necessity
  1-11-refine-home-manager-architecture-and-document-patterns: deferred
  # Story 1.12: Deploy blackphos and Integrate into Zerotier Network
  # Physical deployment to blackphos laptop, zerotier peer configuration (darwin)
  # Heterogeneous network validation (nixos ↔ nix-darwin: cinnabar + electrum + blackphos)
  # Prerequisites: Stories 1.10BA + 1.10C (hard), Story 1.11 (soft/optional)
  # Estimated effort: 4-6 hours (deployment, zerotier darwin, network validation)
  # Strategic value: Proves heterogeneous networking, validates multi-platform coordination
  # Context XML generated (2025-11-17): 556 lines comprehensive context, 4 task groups, 6 ACs, 16 test ideas
  # COMPLETE (2025-11-19): All ACs satisfied, zerotier darwin integration validated, heterogeneous networking proven
  # Zero regressions, cross-platform SSH validated, blackphos physical deployment successful
  1-12-deploy-blackphos-zerotier-integration: done
  # Story 1.13: Document Integration Findings and Architectural Patterns
  # Consolidate Epic 1 learnings: terraform+clan, dendritic patterns, darwin integration, heterogeneous networking
  # Pattern confidence assessment (proven/needs-testing/uncertain), production refactoring recommendations
  # Prerequisites: Story 1.12 (blackphos deployed, heterogeneous networking validated)
  # Estimated effort: 3-4 hours (documentation consolidation)
  # Strategic value: Comprehensive blueprint for Epic 2-6, captures institutional knowledge
  # COMPLETE (2025-11-19): Documentation deliverables complete (95% coverage, 3,000+ lines)
  # Integration findings, architectural patterns, migration patterns, Epic 2-6 guidance all documented
  1-13-document-integration-findings: done
  # Story 1.14: Execute GO/NO-GO Decision Framework
  # Evaluate Epic 1 Phase 0 results against decision criteria (infrastructure, patterns, darwin, networking, transformation)
  # Decision: GO (proceed Epic 2+), CONDITIONAL GO (proceed with cautions), NO-GO (resolve blockers)
  # Prerequisites: Story 1.13 (integration findings documented)
  # Estimated effort: 1-2 hours (decision evaluation)
  # Decision criteria: 95% coverage (achieved), all patterns validated, high confidence for production
  # Work item created (2025-11-19): 1-14-execute-go-no-go-decision.md (decision/review framework, 1,575 lines)
  # Context generated (2025-11-20): 387 lines comprehensive Epic 1 evidence (docs, code, dependencies, constraints, tests)
  # Independent validation (2025-11-20): 94% quality score (0 critical, 0 major, 3 minor issues) - validation-report-2025-11-20-130959.md
  # COMPLETE (2025-11-20): GO DECISION RENDERED - Epic 2-6 production refactoring AUTHORIZED
  # Execution: Orchestrator-subagent pattern (5 parallel research tasks → AC1-AC6 comprehensive evaluation)
  # Decision document: go-no-go-decision.md (1,480 lines, AC1-AC6 complete)
  # AC1 Decision Framework: ALL 7 criteria PASS (infrastructure, dendritic, darwin, heterogeneous networking, transformation, home-manager, pattern confidence)
  # AC2 Blocker Assessment: 0 CRITICAL, 0 MAJOR, 1 MINOR (zerotier darwin homebrew - proven workaround)
  # AC3 Decision: GO (100% validation success, zero blocking issues, VERY HIGH confidence)
  # AC4 GO Transition Plan: Epic 2-6 plan validated (6 epics, 19 stories, 115-145h), migration patterns ready, test-clan configs ready, blackphos Option A (revert to infra)
  # AC6 Next Steps: Sprint planning update (Story 1.14 done, Epic 1 done, Epic 2 contexted), Epic 2 Story 2.1 preparation, Epic 2 kickoff sequence (6 stories, 2-3 weeks)
  # Authorization: Proceed immediately to Epic 2 Story 2.1 (cinnabar VPS production deployment using validated dendritic+clan patterns)
  # Epic 1 investment: 60-80h actual → Epic 2-6 ROI: 0.9x-1.4x immediate, strategic value enables 200+h Epic 2-6 with high confidence
  # Commits: 5 atomic commits (Task 1 evidence gathering, AC1 evaluation, AC2 blockers, AC3 GO decision, AC4/AC6 transition plan)
  1-14-execute-go-no-go-decision: done
  # Epic 1 Retrospective: COMPLETE (2025-11-20) - Comprehensive review of Epic 1 learnings, action items for Epic 2, course-correction workflow identified
  epic-1-retrospective: done

  # Epic 2 (Phase 1-4) - Infrastructure Architecture Migration
  # COMPLETE (2025-11-28): 14/14 stories done, retrospective complete
  # Duration: 8 days (2025-11-20 to 2025-11-28), ~525 commits
  # Apply validated test-clan patterns to infra repository across 4 phases:
  # Phase 1: Home-manager foundation (Pattern A migration, secrets two-tier)
  # Phase 2: Darwin workstations (blackphos + stibnite config migration, zerotier darwin)
  # Phase 3: VPS migration (cinnabar + electrum config migration, infrastructure already deployed)
  # Phase 4: Future machines (rosegold + argentum config creation, test harness migration)
  # "Rip the band-aid" strategy - comprehensive migration with all patterns applied
  epic-2: done
  epic-2-notes: |
    Apply validated test-clan patterns to infra repository.
    4 phases: (1) Home-manager foundation, (2) Darwin workstations (blackphos+stibnite),
    (3) VPS migration (cinnabar+electrum), (4) Future machines (rosegold+argentum).
    13 stories total. "Rip the band-aid" strategy.

  # Phase 1: Home-Manager Migration Foundation (4 stories)
  # Story 2.1: DONE ✅ APPROVED ✅ (2025-11-22) - Identify infra-specific components to preserve
  # Discovery/documentation story identifying all infra-unique components requiring preservation during Epic 2 migration
  # Deliverable: story-2-1-preservation-checklist.md (887 lines, 10 sections covering GitHub Actions, TypeScript, Cloudflare, docs, scripts)
  # Quality: 9.8/10 post-correction (initial 8.5/10, 5 corrections applied via 4 atomic commits)
  # All 7 ACs satisfied, all 7 tasks verified complete, zero critical issues, zero missing components
  # Empirical validation: workflow counts ✓, TypeScript structure ✓, Cloudflare config ✓, additional components ✓
  # Migration directives: PRESERVE/REPLACE/CREATE categorization unambiguous, Story 2.3 execution guidance actionable
  # Verification strategy: Git diff commands, functional validation, nix configuration checks all documented
  # Review (2025-11-22): APPROVED - Zero blockers, production-ready, Story 2.3 can proceed with high confidence
  # Corrections: composite actions count (2 not 3), clan components clarified (NEW not replacements), .gitleaksignore added, docs/ symlinks documented, subdirectory inventory completed
  # Strategic value: Preservation checklist provides comprehensive safety mechanism for Epic 2 "rip the band-aid" migration
  # Unblocks: Story 2.2 (diff analysis can begin), Story 2.3 (migration can proceed with preservation guidance)
  story-2-1: done
  story-2-1-title: "Identify infra-specific components to preserve"
  story-2-2: done
  story-2-2-title: "Prepare clan-01 branch for migration"
  # Story 2.3: DONE (2025-11-24) - Wholesale migration from test-clan to infra
  # Implementation: 2 commits (ab10e106 migration, dba16c09 flake fix)
  # Source: test-clan @ e1dcec1b, Safety tag: pre-story-2.3-migration @ ace32e63
  # All 7 ACs verified PASS: dendritic structure, clan config, preserved components,
  # justfile merged, flake evaluates, test patterns working
  # Archived unmigrated packages: atuin-format, starship-jj → docs/notes/development/archived-overlays/
  # Note: CLAUDE.md update deferred to clan-01 → main merge
  story-2-3: done
  story-2-3-title: "Execute wholesale migration from test-clan to infra"
  # Story 2.4: DONE (2025-11-24) - Home-manager secrets migration complete
  # Re-encrypted crs58 (8 secrets) and raquel (5 secrets) with infra age keys
  # All 7 ACs validated, documentation created (540 lines)
  # REVIEW (2025-11-24): APPROVED - All ACs implemented, all tasks verified, zero blockers
  story-2-4: done
  story-2-4-title: "Home-manager secrets migration"

  # Phase 2: Active Darwin Workstations (4 stories)
  # Story 2.5: DONE (2025-11-24) - Blackphos config validation story
  # Validation story complete - discovered and fixed Story 2.3 migration gap
  # Migration gap fix: modules/home/packages/ missing, configurations.nix incomplete
  # All 7 ACs PASS: build, packages, zerotier, secrets, eval, darwin features, docs
  # Context: docs/notes/development/2-5-blackphos-config-migration-to-infra.context.xml
  # REVIEW (2025-11-24): APPROVED - All ACs implemented, all tasks verified, zero blockers
  story-2-5: done
  story-2-5-title: "Blackphos config migration to infra"
  # Story 2.6: DONE ✅ APPROVED ✅ (2025-11-24) - Stibnite config migration
  # Implementation story: Create stibnite darwin config using blackphos as template
  # Single-user pattern (crs58 only), 8 secrets, 7 aggregates including AI
  # Context: docs/notes/development/2-6-stibnite-config-migration.context.xml
  # All 7 ACs PASS: directory structure, darwin build, crs58 config, zerotier, eval, darwin features, docs
  # REVIEW (2025-11-24): APPROVED - All 7 ACs implemented, all 32 tasks verified, zero blockers
  # Implementation: 182-line darwin module (vs blackphos 217), single-user simplification
  # Key achievements: All 7 aggregates for crs58, zerotier db4344343b14b903, darwin features validated
  story-2-6: done
  story-2-6-title: "Stibnite config migration"
  # Story 2.7: DONE ✅ (2025-11-26) - Activate blackphos and stibnite from infra
  # Deployment story: Switch both darwin workstations to infra clan-01 branch
  # Blackphos: Straightforward switch from test-clan (same dendritic+clan architecture)
  # Stibnite: Iterative migration with gap fixes (nix-rosetta-builder, colima, incus)
  # Zerotier: stibnite authorized on network db4344343b14b903, full mesh connectivity
  # SSH: All .zt hostnames working, stibnite.zt added to home-manager SSH config
  # Config persistence: zerotier allowedIps updated in both infra and test-clan
  # Both darwin workstations now operational under infra clan-01 management
  story-2-7: done
  story-2-7-title: "Activate blackphos and stibnite from infra"
  # Story 2.8: DONE ✅ (2025-11-26) - Cleanup unused darwin configs
  # Originally scoped: blackphos-nixos, stibnite-nixos, rosegold-old
  # Finding: These obsolete configs don't exist on clan-01 branch (never created or already removed)
  # Remaining: test-darwin (minor test config) and gcp-vm (evaluate later) - deferred as non-blocking
  # Outcome: No cleanup required, Phase 2 complete
  story-2-8: done
  story-2-8-title: "Cleanup unused darwin configs"

  # Phase 3: VPS Migration (2 stories)
  # Story 2.9: DONE (2025-11-26) - Cinnabar config migration (deployment)
  # Switch cinnabar VPS deployment source from test-clan to infra clan-01 branch
  # HIGH-RISK: cinnabar is zerotier controller for network db4344343b14b903
  # Config already exists in infra (migrated in Story 2.3), this is deployment switching
  # COMPLETE: Deployment successful, generation 20, all peers connected, --accept-flake-config fixed
  story-2-9: done
  story-2-9-title: "Cinnabar config migration"
  # Story 2.10: DONE (2025-11-26) - Electrum config migration (deployment)
  # Switch electrum VPS deployment source from test-clan to infra clan-01 branch
  # LOWER-RISK: electrum is zerotier PEER (not controller) - network remains operational if issues
  # COMPLETE: Deployment successful, zerotier peer operational, all ACs verified
  # Bonus: rosetta-restart command added, rosetta-builder SSH fix applied
  # Phase 3 complete: cinnabar (controller) + electrum (peer) both on infra clan-01
  story-2-10: done
  story-2-10-title: "Electrum config migration"

  # Phase 4: Infrastructure Validation and Future Machines (4 stories)
  # Story 2.11: DONE (2025-11-27) - Test harness and CI validation
  # Validates test harness and CI workflow alignment with dendritic+clan architecture
  # 8 ACs: local checks, stibnite validation, CI orphans, VPS builds, home configs, caching pattern, CI run, docs
  # Session 1 (2025-11-26): Tasks 1-9 executed, CI dispatched
  # Session 2 (2025-11-27): 9 iterative CI fixes, all jobs green
  # Bonus: update-flake-inputs.yaml workflow, preview-release-version improvements
  story-2-11: done
  story-2-11-title: "Test harness and CI validation"
  # Story 2.12: DONE (2025-11-27) - Consolidate agents-md module duplication
  # Finding: Consolidation already completed in test-clan (commit 944a2ca, 2025-11-19) before Story 2.3 migration
  # Current state: Single canonical _agents-md.nix with 7 correct import sites, zero duplication
  # Architecture validated: Two-tier pattern (option definition + configuration) follows dendritic conventions
  # No work required - marked done based on Party Mode investigation confirming clean migration
  story-2-12: done
  story-2-12-title: "Consolidate agents-md module duplication"
  # Story 2.13: DONE (2025-11-27) - Rosegold configuration creation
  # Create rosegold darwin config using blackphos dual-user template
  # Users: janettesmith (primary, basic like raquel) + cameron (admin, crs58 alias)
  # Implementation: 8 commits, all 7 ACs verified, 15/15 nix-unit tests pass
  # Files: janettesmith module, rosegold darwin config, sops secrets, nix-unit updates
  # REVIEW (2025-11-27): APPROVED - All 7 ACs implemented, all 9 tasks verified, zero blockers
  story-2-13: done
  story-2-13-title: "Rosegold configuration creation"
  # Story 2.14: DONE (2025-11-27) - Argentum configuration creation
  # Create argentum darwin config using rosegold dual-user template
  # Users: christophersmith (primary, basic like raquel) + cameron (admin, crs58 alias)
  # Implementation: 5 commits, all 7 ACs verified, 16/16 nix-unit tests pass
  # Files: christophersmith module, argentum darwin config, sops secrets, nix-unit updates
  # Epic 2 Phase 4 COMPLETE - all 14 stories done, ready for Epic 3 deployment
  story-2-14: done
  story-2-14-title: "Argentum configuration creation"

  # Epic 2 Retrospective: COMPLETE (2025-11-28) - Lightweight review of pattern application epic
  # Key outcomes: Pattern reuse validated, no new process needed, Epic 3-4 readiness HIGH
  epic-2-retrospective: done

  # Epic 3 - First Darwin Migration (blackphos) - CONSOLIDATED
  # SPRINT CHANGE (2025-11-20): Work completed in Epic 1 Stories 1.8, 1.8A, 1.10BA-1.10E, 1.12
  # 270 packages preserved, zerotier validated, physical deployment successful
  # Remaining work: Epic 2 Phase 2 Stories 2.5, 2.7 (config migration to infra)
  epic-3-consolidation: consolidated
  epic-3-consolidation-notes: |
    Work completed in Epic 1 Stories 1.8, 1.8A, 1.10BA-1.10E, 1.12.
    270 packages preserved, zerotier validated, physical deployment successful.
    Remaining: Epic 2 Phase 2 Stories 2.5, 2.7 (config migration to infra).
    See: docs/notes/development/epics/epic-3-first-darwin-migration-phase-2-blackphos.md

  # Epic 3 (Phase 2) - Multi-Darwin Validation (rosegold)
  # SPRINT CHANGE (2025-11-20): Renumbered from Epic 4, depends on Epic 2 complete
  # SPRINT UPDATE (2025-11-28): Story 3.1 completed in Epic 2 Story 2.13, deployment stories consolidated
  # COMPLETE (2025-11-29): rosegold deployed, zerotier integrated, 6-machine network operational
  epic-3: done
  epic-3-notes: |
    Deploy rosegold (janettesmith's darwin workstation) and validate multi-darwin coordination.
    Depends on Epic 2 complete.
    Story 3.1 completed in Epic 2 Story 2.13 (rosegold configuration creation).
    Story 3.2 completed 2025-11-29: deployment, zerotier, user validation all verified.
  story-3-1: done
  story-3-1-title: "Rosegold configuration creation [COMPLETED IN EPIC 2]"
  story-3-1-notes: "Completed in Epic 2 Story 2.13 - rosegold darwin config, janettesmith user, sops secrets, clan inventory, test coverage"
  story-3-2: done
  story-3-2-title: "Deploy rosegold and validate zerotier integration"
  story-3-2-notes: "Completed 2025-11-29 - deployment successful, zerotier network db4344343b14b903, rosegold.zt SSH configured, janettesmith+cameron users functional"
  epic-3-retrospective: optional

  # Epic 4 (Phase 3) - Third Darwin Host (argentum)
  # SPRINT CHANGE (2025-11-20): Renumbered from Epic 5, depends on Epic 3 complete
  # COMPLETE (2025-11-29): argentum deployed, 6-machine zerotier network operational
  epic-4: done
  epic-4-notes: |
    Deploy argentum (christophersmith's darwin workstation) and validate 4-machine network.
    Depends on Epic 3 complete.
    Story 4.1 completed 2025-11-29: argentum deployed from Epic 2 Story 2.14 config.
    Story 4.2 completed 2025-11-29: 6-machine network exceeds 4-machine requirement.
  story-4-1: done
  story-4-1-title: "Deploy argentum and validate functionality"
  story-4-1-notes: "Completed 2025-11-29 - config from Epic 2 Story 2.14, deployment successful, christophersmith+cameron users functional"
  story-4-2: done
  story-4-2-title: "Validate 4-machine network and assess Epic 5 readiness"
  story-4-2-notes: "Completed 2025-11-29 - 6-machine network (cinnabar, electrum, stibnite, blackphos, rosegold, argentum), full mesh SSH verified"
  epic-4-retrospective: optional

  # Epic 5 (Phase 4) - Primary Workstation Validation (stibnite) - OPTIONAL
  # SPRINT CHANGE (2025-11-20): Renumbered from Epic 6, marked OPTIONAL with execution criteria
  # SKIPPED (2025-11-29): Stibnite stable since Epic 2 Story 2.7, no instability indicators
  epic-5: skipped
  epic-5-notes: |
    Extended stibnite stability validation (CONDITIONAL - evaluate at Epic 4 completion).
    Execute ONLY IF Epic 2 Phase 2 deployment shows instability requiring observation period.
    Decision criteria: Skip if stibnite stable 2+ weeks post-Epic 2 with zero critical issues.
    DECISION (2025-11-29): SKIPPED - stibnite operational since Nov 26, zero critical issues.
  story-5-1: skipped
  story-5-1-title: "Extended stibnite stability validation [SKIPPED]"
  story-5-1-notes: "SKIPPED 2025-11-29 - stibnite stable since Epic 2 Story 2.7, no extended validation needed"
  epic-5-execution-criteria: "Evaluated at Epic 4 completion - SKIPPED, stibnite stable"
  epic-5-retrospective: skipped

  # Epic 6 (Phase 5) - Legacy Cleanup
  # SPRINT CHANGE (2025-11-20): Renumbered from Epic 7, depends on Epic 4 + Epic 5 (if executed)
  # COMPLETE (2025-11-29): Stories 6.1-6.2 already done via test-clan migration approach
  # Story 6.3 superseded by Epic 8 (comprehensive docs update)
  epic-6: done
  epic-6-notes: |
    Remove nixos-unified infrastructure, finalize secrets migration, update documentation.
    Depends on Epic 4 + Epic 5 (if executed).
    OUTCOME (2025-11-29): Stories 6.1-6.2 complete via wholesale test-clan migration.
    Story 6.3 expanded to Epic 8 for comprehensive Starlight docs update.
  story-6-1: done
  story-6-1-title: "Remove nixos-unified infrastructure"
  story-6-1-notes: "Already complete - clan-01 built from test-clan (dendritic+clan), no nixos-unified to remove"
  story-6-2: done
  story-6-2-title: "Finalize secrets migration strategy"
  story-6-2-notes: "Already complete - two-tier secrets (sops-nix for home-manager, clan vars for system) established in Epic 1 Story 1.10C"
  story-6-3: superseded
  story-6-3-title: "Update documentation and finalize migration [SUPERSEDED BY EPIC 8]"
  story-6-3-notes: "Expanded to Epic 8 for comprehensive Starlight docs alignment with dendritic+clan architecture"
  epic-6-retrospective: optional

  # ============================================================================
  # NEW EPICS (2025-11-29) - Post-Migration Infrastructure Expansion
  # ============================================================================

  # Epic 7 - GCP Multi-Node Infrastructure
  # PRIMARY OBJECTIVE: Togglable CPU and GPU compute nodes on GCP
  # COMPLETE (2025-12-01): All 4 stories DONE and APPROVED
  # Duration: 2 days intensive implementation (2025-11-30 to 2025-12-01)
  # Deliverables: galena (CPU), scheelite (GPU), 10 patterns established
  epic-7: done
  epic-7-notes: |
    Deploy togglable CPU-only and GPU-capable nodes on GCP using terranix.
    Primary business objective - GCP contract, GPU availability, cost management.
    Depends on Epic 6 complete.
  # Story 7.1: DONE (2025-11-30) - GCP terranix module created and validated
  # Implementation: modules/terranix/gcp.nix (172 lines) following hetzner.nix pattern
  # All 11 ACs satisfied: provider, firewall, SSH key, instance template, validation
  # Secret prerequisite: gcp-service-account-json required before Stories 7.2-7.4 deployment
  # REVIEW (2025-11-30): APPROVED - 11/11 ACs, 6/6 tasks verified, 0 HIGH/MEDIUM findings
  story-7-1: done
  story-7-1-title: "Terranix GCP provider and base configuration"
  # Story 7.2: DONE (2025-11-30) - CPU-only machine definitions and deployment validation
  # galena (e2-standard-8) deployed, SSH validated, NixOS 25.11 operational
  # Key learnings: GCP root SSH startup-script, user service dependency, toggle mechanism
  # galena disabled for cost control, terraform destroy pending user execution
  # REVIEW (2025-11-30): APPROVED - 10/10 ACs, 6/6 tasks verified, 0 HIGH/MEDIUM findings
  story-7-2: done
  story-7-2-title: "CPU-only togglable node definition and deployment"
  # Story 7.3/7.4 REORDERED (2025-11-30): Zerotier before GPU per Party Mode decision
  # Rationale: Zerotier is infrastructure-level; test on cheap CPU node before expensive GPU
  # Story 7.3: DONE (2025-12-01) - APPROVED ✅ - Zerotier mesh validated, all 7 ACs satisfied
  # galena integrated: inventory, zerotier peer, SSH config, declarative known_hosts
  # Task 7 (cost control) deferred - galena remains active for continued development
  # Commits: 400cfdb0, 10763ade, bd02b75c (pre-story), 0341b317, d3e3a4ef (session)
  # REVIEW (2025-12-01): APPROVE - 7/7 ACs verified, 0 HIGH/MEDIUM findings, 3 advisory notes
  story-7-3: done
  story-7-3-title: "Clan integration and zerotier mesh for GCP nodes"
  # Story 7.4: IMPLEMENTATION COMPLETE (2025-12-01)
  # Tasks 1-4, 6-7 complete; Task 5 (deploy) deferred pending user decision
  # Configuration validated: nix build .#nixosConfigurations.scheelite passes
  # Commits: e79e19ea..8d02d57f (20 commits including clan vars auto-commits)
  # Zerotier IP: fddb:4344:343b:14b9:399:9380:46d5:3400
  # To deploy: set scheelite.enabled = true in gcp.nix, run nix run .#terraform
  story-7-4: done
  story-7-4-title: "GPU-capable togglable node definition and deployment"
  story-7-4-notes: "APPROVED 2025-12-01 - All 11 ACs implemented, Tesla T4 GPU deployed and validated, zerotier mesh integrated, datacenter NVIDIA patterns documented"
  # Epic 7 Retrospective: COMPLETE (2025-12-01)
  # Document: docs/notes/development/retrospectives/epic-7-gcp-multi-node-infrastructure.md
  # Key outcomes: 10 patterns formalized, 9 technical discoveries documented, action items for Epic 8
  epic-7-retrospective: done

  # Epic 8 - Documentation Alignment
  # Update Starlight docs to reflect dendritic+clan architecture
  epic-8: contexted
  epic-8-notes: |
    Comprehensive update of packages/docs/src/content/docs/ Starlight site.
    Align with dendritic flake-parts + clan architecture.
    Update secrets management, host onboarding, architecture docs.
    Depends on Epic 7 complete (document what exists).
  story-8-1: done
  story-8-1-title: "Audit existing Starlight docs for staleness"
  story-8-1-notes: "Completed 2025-12-01 - 59 files audited, 22 current, 21 stale, 9 obsolete, 7 missing topics identified. Results: story-8.1-audit-results.md"
  # Story 8.2: DRAFTED (2025-12-01) - Architecture and Concepts Documentation Update
  # Scope: Create dendritic-architecture.md, clan-integration.md, rewrite nix-config-architecture.md,
  # repository-structure.md, index.mdx, handle obsolete concepts, update credits.md
  # 8 ACs, 9 task groups, 47 subtasks, estimated 34-38 hours
  # Dependencies: Story 8.1 (done), Blocks: Stories 8.3, 8.4
  story-8-2: done
  story-8-2-title: "Update architecture and patterns documentation"
  story-8-2-notes: "Completed 2025-12-01 - Created dendritic-architecture.md, clan-integration.md; rewrote nix-config-architecture.md, repository-structure.md, multi-user-patterns.md; updated index.mdx, credits.md, concepts/index.md; deleted understanding-autowiring.md. 9 commits."
  story-8-3: review
  story-8-3-title: "Update host onboarding guides (darwin vs nixos)"
  story-8-3-notes: "Implementation complete 2025-12-01 - Rewrote host-onboarding.md (darwin vs NixOS), home-manager-onboarding.md (portable modules, aggregates), getting-started.md (dendritic pattern), index.md (navigation). 4 atomic commits, zero deprecated references, all links valid."
  story-8-4: drafted
  story-8-4-title: "Update secrets management documentation"
  epic-8-retrospective: optional

  # Epic 9 - Branch Consolidation and Release
  # Merge clan-01 to main with proper tagging
  epic-9: contexted
  epic-9-notes: |
    Merge clan-01 branch to main with bookmark tags at branch boundaries.
    CI/CD validation, release tagging automation.
    Depends on Epic 8 complete (docs accurate before merge).
  story-9-1: backlog
  story-9-1-title: "Create bookmark tags at branch boundaries (docs, clan, clan-01)"
  story-9-2: backlog
  story-9-2-title: "Validate CI/CD workflows on clan-01"
  story-9-3: backlog
  story-9-3-title: "Merge clan-01 to main and trigger release"
  epic-9-retrospective: optional

# Sprint Change History
sprint_change_history:
  - date: "2025-11-30"
    type: "story-reorder"
    changes:
      - "Epic 7: Story 7.3/7.4 swapped - zerotier before GPU"
      - "Story 7.3: Now 'Clan integration and zerotier mesh for GCP nodes' (was 7.4)"
      - "Story 7.4: Now 'GPU-capable togglable node definition and deployment' (was 7.3)"
    rationale: "Party Mode decision - zerotier is infrastructure-level, test on cheap CPU node (galena) before expensive GPU (scheelite)"
  - date: "2025-11-29"
    type: "epic-completion-and-expansion"
    changes:
      - "Epic 3: DONE - rosegold deployed, zerotier integrated"
      - "Epic 4: DONE - argentum deployed, 6-machine network operational"
      - "Epic 5: SKIPPED - stibnite stable, no extended validation needed"
      - "Epic 6: DONE - Stories 6.1-6.2 complete via migration approach, 6.3 superseded"
      - "Epic 7: NEW - GCP multi-node infrastructure (CPU + GPU togglable nodes)"
      - "Epic 8: NEW - Documentation alignment (Starlight docs update)"
      - "Epic 9: NEW - Branch consolidation and release (main merge)"
    rationale: "All darwin machines deployed, zerotier mesh operational. New epics for GCP expansion, docs update, and release."
  - date: "2025-11-20"
    type: "epic-realignment"
    proposal: "docs/notes/development/sprint-change-proposal-2025-11-20.md"
    changes:
      - "Epic 2: Redefined from Phase 1 only → Phase 1-4 (6 stories → 13 stories)"
      - "Epic 3: Consolidated (work complete in Epic 1)"
      - "Epic 4-7: Renumbered to Epic 3-6"
      - "Epic 5 (was Epic 6): Marked OPTIONAL with execution criteria"
    rationale: "Epic 1 over-delivered - infrastructure deployed, patterns validated, blackphos migrated"
